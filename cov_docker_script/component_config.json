{
  "_comment": "Component Build Configuration for Coverity/Native Builds",
  "_version": "2.0",
  "_description": "Defines dependencies and build settings for the native component",

"dependencies": {
    "_comment": "External repositories needed by this component",
    "repos": [
      {
        "name": "Utopia",
        "repo": "https://github.com/rdkcentral/utopia.git",
        "branch": "develop",
        "header_paths": [
          { "source": "source/include/sysevent", "destination": "$HOME/usr/include/rdkb/sysevent" },
          { "source": "source/include/syscfg", "destination": "$HOME/usr/include/rdkb/syscfg" },
          { "source": "source/include", "destination": "$HOME/usr/include/rdkb/utctx" },
          { "source": "source/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/utapi/lib", "destination": "$HOME/usr/include/rdkb/utapi" },
          { "source": "source/include/ulog", "destination": "$HOME/usr/include/rdkb/ulog" },
          { "source": "source/util/utils", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/sysevent/lib", "destination": "$HOME/usr/include/rdkb/sysevent" },
          { "source": "source/util/print_uptime", "destination": "$HOME/usr/include/rdkb" }
        ],
        "build": {
          "type": "script",
          "script": "cov_docker_script/common_external_build.sh"
        }
      },
      {
        "name": "common-library",
        "repo": "https://github.com/rdkcentral/common-library.git",
        "branch": "develop",
        "header_paths": [
          { "source": "source/ccsp/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/ccsp/components/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/ccsp/custom", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/cosa/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/cosa/include/linux", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/cosa/include/linux", "destination": "$HOME/usr/include/rdkb/linux" },
          { "source": "source/cosa/package/slap/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/debug_api/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/util_api/http/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/util_api/ansc/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/ccsp/components/common/MessageBusHelper/include", "destination": "$HOME/usr/include/rdkb" },
          { "source": "source/dm_pack", "destination": "$HOME/usr/include/rdkb" }
        ],
        "build": {
          "type": "script",
          "script": "cov_docker_script/common_external_build.sh"
        }
      },
      {
        "name": "rdkb-halif-cm",
        "repo": "https://github.com/rdkcentral/rdkb-halif-cm.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-dhcp",
        "repo": "https://github.com/rdkcentral/rdkb-halif-dhcp.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-ethsw",
        "repo": "https://github.com/rdkcentral/rdkb-halif-ethsw.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-moca",
        "repo": "https://github.com/rdkcentral/rdkb-halif-moca.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-mso",
        "repo": "https://github.com/rdkcentral/rdkb-halif-mso.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-mta",
        "repo": "https://github.com/rdkcentral/rdkb-halif-mta.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-platform",
        "repo": "https://github.com/rdkcentral/rdkb-halif-platform.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-vlan",
        "repo": "https://github.com/rdkcentral/rdkb-halif-vlan.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "rdkb-halif-wifi",
        "repo": "https://github.com/rdkcentral/rdkb-halif-wifi.git",
        "branch": "main",
        "header_paths": [
          { "source": "include", "destination": "$HOME/usr/include/rdkb" }
        ]
      },
      {
        "name": "hardware-abstraction-layer",
        "repo": "https://github.com/rdkcentral/hardware-abstraction-layer.git",
        "branch": "develop",
        "build": {
          "type": "commands",
          "commands": [
            "./autogen.sh",
            "./configure",
            "make -C source/cm CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/dhcpv4c CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/ethsw CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/moca CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/mso_mgmt CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/mta CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/platform CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/vlan CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\"",
            "make -C source/wifi CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\""
          ]
        }
      },
      {
        "name": "libSyscallWrapper",
        "repo": "https://github.com/rdkcentral/libSyscallWrapper.git",
        "branch": "develop",
        "header_paths": [
          { "source": "source", "destination": "$HOME/usr/include/rdkb" }
        ],
        "build": {
          "type": "autotools",
          "configure_flags": "CPPFLAGS=\"-I$HOME/usr/include/rdkb\" LDFLAGS=\"-L$HOME/usr/local/lib\""
        }
      }
    ]
  },
  
  "native_component": {
    "_comment": "Configuration for the main component being built",
    "name": "mta-agent",
    "include_path": "$HOME/usr/include/rdkb/",
    "lib_output_path": "$HOME/usr/local/lib/",
    "pre_build_commands": [
      {
        "description": "Generate dm_pack_datamodel.c from XML",
        "command": "python3 $HOME/usr/include/rdkb/dm_pack_code_gen.py config/CcspMtaAgent.xml source/MtaAgentSsp/dm_pack_datamodel.c"
      }
    ],
    "build": {
      "type": "autotools",
      "configure_options_file": "cov_docker_script/configure_options.conf"
    }
  }
}
